#!/bin/sh

if [ -n "$1" ]
then
    if [ "$1" == "gunicorn" ]; then
        sudo ~/miniconda3/bin/gunicorn -c config.py main:app --workers 8 --worker-class uvicorn.workers.UvicornWorker --bind=server2.company:8123 --timeout=300
    elif [ "$1" == "faiss" ]; then
        sudo ~/miniconda3/bin/python faiss_server.py
    else
        echo "parameter is incorrect"
    fi
else
    echo "No parameters found"
fi

# curl -X POST -H "Content-Type: application/json" \
#  -d '{
#     "data": ["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"],
#     "distance_threshold": 0.75,
#     "limit": 2
# }' http://server2.company:8123/embeddings --fail --show-error


# curl -X POST -H "Content-Type: application/json" \
#  -d '{
#     "value": ["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"],
#     "type": "imagebase64"
# }' http://derty.company:8001/v1/faces --fail --show-error
